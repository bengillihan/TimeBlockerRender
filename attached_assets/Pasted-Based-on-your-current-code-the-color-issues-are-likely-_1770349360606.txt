Based on your current code, the "color" issues are likely due to three specific problems:

Invisible Text: The time labels are set to white text on a light background, making them unreadable.

Broken Dark Mode: The main time blocks have hardcoded light colors, so they don't darken when you switch to Dark Mode.

The "Haze": The loading overlay is still getting stuck (as mentioned before).

Here is the complete fix for static/css/style.css to make the colors look professional and work in both Light and Dark modes.

1. Fix the "Invisible Text" & Dark Mode
In style.css, the .time-block uses a hardcoded light color (#f8f9ff), and .time-label forces white text (color: #ffffff !important). This creates White Text on a White Background.

Change this section in style.css:

CSS

/* Add these variables at the very top of style.css */
:root {
    --block-bg: #f8f9ff;
    --block-hover-bg: #f0f2ff;
    --block-border: #e0e0e0;
    --text-primary: #212529;
    --label-bg: #6c757d; /* Grey badge for time labels */
    --label-text: #ffffff;
}

[data-theme="dark"] {
    --block-bg: #2d2d2d;
    --block-hover-bg: #3d3d3d;
    --block-border: #404040;
    --text-primary: #e0e0e0;
    --label-bg: #495057;
    --label-text: #e0e0e0;
}

/* ... existing code ... */

/* UPDATE .time-block to use variables */
.time-block {
    display: flex;
    align-items: center;
    border: 1px solid var(--block-border); /* Use variable */
    padding: 2px;
    min-height: 28px; 
    cursor: move;
    position: relative;
    transition: background-color 0.15s ease-in-out;
    background-color: var(--block-bg); /* Use variable */
    color: var(--text-primary);       /* Ensure text is visible */
}

.time-block:hover {
    background-color: var(--block-hover-bg); /* Use variable */
}

/* UPDATE .time-label to be readable */
.time-label {
    width: 50px; 
    font-size: 0.8em;
    color: var(--label-text) !important;       /* Use variable */
    font-weight: 700;
    background-color: var(--label-bg);         /* Give it a distinct background */
    padding: 2px 4px;
    border-radius: 3px;
    text-align: center;
    margin-right: 5px; /* Add some spacing */
}
2. Fix the "Haze" (Permanent Fix)
Your loading animation finishes but snaps back to being visible because it lacks the forwards property.

Update the .loading::after rule (Line ~482):

CSS

.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    pointer-events: none; /* Critical: lets you click through it if it gets stuck */
    animation: loadingFade 2s ease-in-out forwards; /* Critical: 'forwards' keeps it hidden at the end */
}
3. Clean Up Duplicates
You have two rules for dragging opacity that might conflict. Replace lines ~470-480 with this single, cleaner block:

CSS

/* Unified Dragging Styles */
.time-content.dragging,
.time-block.dragging {
    opacity: 0.5;
    background-color: #e9ecef; /* Light grey visual cue */
    border: 1px dashed #6c757d;
}

.drag-over {
    background-color: rgba(13, 110, 253, 0.1) !important; /* Bootstrap Primary Blue tint */
    border: 2px dashed #0d6efd !important;
}
Summary of Fixes
Variables: Colors now adapt to Dark Mode automatically.

Contrast: Time labels (09:00, etc.) are now grey badges with white text, making them readable against any background.

Haze: The pointer-events: none and animation-fill-mode: forwards ensures the white overlay never blocks your UI again.